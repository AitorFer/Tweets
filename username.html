<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title></title>
  </head>
  <body>
    <style>
#buscador{
text-align: center;

}
#datosPerfil{
  text-align: center;
  margin-right: 400px;
}
#mensajes{
  text-align: center;
}


    </style>
<div id='buscador'>
                                    <br>
  <input id='username' type='text' method='post' placeholder="Username">
  <button id='buscar' class="btn btn-secondary btn-sm" >Buscar</button>


      </div>
                                    <hr>
                                    <hr>
                                    <br>
  <div id='datosPerfil'>


    </div>
  <div id='mensajes'>

      </div>
  <div id='likes'>
  </div>

    <script src='https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.js'></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js" integrity="sha384-smHYKdLADwkXOn1EmN1qk/HfnUcbVRZyYmZ4qpPea6sjB/pTJ0euyQp0Mk8ck+5T" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" integrity="sha384-WskhaSGFgHYWDcbwN70/dfYBj47jz9qbsMId/iRN3ewGhXQFZCSftd1LZCfmhktB" crossorigin="anonymous">

<script type="text/javascript">
                          //get para obtener tweets y obtener el usuarioLike

    $("#username").keypress(function(e) {
      if(e.which == 13) {
        obtenerDatos();
      }
    });

    $('button#buscar').click(obtenerDatos)


function obtenerDatos(datos)
{
    var username= $("#username").val();

      $.ajax({
        type: 'GET',
        url:"http://192.168.100.31:1337/usuario/" + username,
        data: {}
      }).done(function(usuario){
        console.log(usuario)
                            //pintar los datos del usuario


        $('div#datosPerfil').append('<div class="card w-75" data-id="' + usuario.id+'"><br><br><hr>'+'<img src="'+usuario.imagen+'" width=100 height=100>'+ '<h4 id="nombreUsuario">' + usuario.username+ '</h4>'+'<br><br><span>'+usuario.tweets.length+'</span><a href="#" id="clickTweets">Tweets</a><h4><span>' + usuario.likes.length+'</span> '+'<a href="#" id="likes">Likes</h4></a></div>')
        pintarTweets(usuario.tweets);
        pintarLikes(usuario.likes);
      }).fail(function(){

      })
}

                          // ver todos y quien ha dado likes a nuestro tweets

  $(document).on('click','a#clickTweets',function(){

    $('div#mensajes').show()
    $('div#likes').hide()

});

function pintarTweets(tweets){

    tweets.forEach(function(tweet){
      $('div#mensajes').append('<div class="card w-75" data-id="' + tweet.id + '"><br><br><hr>'+'<h5 style="margin-right:750px">'+ tweet.creador.username +'</h5>'+'<img src="'+tweet.creador.imagen+'" width=100 height=100>'+ '<h4>' + tweet.mensaje + '</h4>'+'<br><h4><span>' + tweet.likes.length+'</span> '+'likes</h4></div>')
    })

}
                          //pintar la gente que ha dado like a nuestro tweet
$(document).on('click','a#likes',function(){
        $('div#mensajes').hide();
        $('div#likes').show();

});

function pintarLikes(likes){

  likes.forEach(function(tweet){
    $('div#likes').append('<div class="card w-75" data-id="' + tweet.id + '"><br><br><hr>'+'<h5 style="margin-right:750px">'+ tweet.creador.username +'</h5>'+'<img src="'+tweet.creador.imagen+'" width=100 height=100>'+ '<h4>' + tweet.mensaje + '</h4>'+'<br><h5><span>' + tweet.likes.length+'</span> '+'likes</h5></div>')

  });
}
</script>


  </body>
</html>
